{% extends "layout.html" %}
{% block title %}Company {{ company.id }} | EMS Home{% endblock %}
{% block content %}
<div class="card">
<h2>{{ company.name }}</h2>
<p>Status: {{ company.status }}</p>
{% if current_user.role == 'Admin' or (current_user.role == 'Editor' and company.created_by_user_id == current_user.id) %}
<a class="button-link" href="{{ url_for('databases.company_edit', company_id=company.id) }}">Edit Company</a>
<form method="post" action="{{ url_for('databases.company_delete', company_id=company.id) }}" class="inline" onsubmit="return confirm('Delete this record?');"><button type="submit">Delete</button></form>
{% endif %}
</div>
<div class="card">
<h3>Projects</h3>
<ul>
{% for project in company.projects %}
<li><a href="{{ url_for('databases.project_detail', project_id=project.id) }}">{{ project.name }}</a> ({{ project.status }})</li>
{% else %}<li>No projects yet.</li>{% endfor %}
</ul>
{% if current_user.role != 'Viewer' and (current_user.role == 'Admin' or company.created_by_user_id == current_user.id) %}
<form method="post" action="{{ url_for('databases.company_quick_add_project', company_id=company.id) }}">
<label>Project name<input type="text" name="name" required></label>
<button type="submit">Quick Add Project</button>
</form>
{% endif %}
</div>
{% endblock %}
